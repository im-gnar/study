계층화
- 장치 드라이버 > cpu 명령어 > 칩 내 논리 게이트
- 네트워크 Application(FTP) > Transport(TCP) > Internet(IP) > Network(ethernet)
- 상위 계층은 하위 계층을 인식하고 활용하지만, 하위 계층은 상위 계층을 인식하지 못함

장점
- 하위 계층의 정보 없이도 단일 계층 이해 가능(이더넷을 몰라도 TCP기반 FTP 사용 가능)
- 대안으로 계층 대체 가능 (FTP는 이더넷, PPP 등에서 변경없이 사용 가능)
- 계층간 의존성 최소화(물리 전송 시스템이 교체돼도 IP 만 작동하면 FTP 사용가능)
- 한번 구축한 계층은 표준화되어 다른 상위계층에서도 사용 가능(TCP/IP는 ssh, telnet, http 등에서 활용)

단점
- 계층을 추가하면 성능 저하(계층간 이동에서 변환 필요)
- 캡슐화가 잘되지않음, 때문에 뭔가를 변경 시 다른 계층에 영향이 가기도 함. (ui 에 표시할 데이터를 위해 DB 포함 모든 레이어에 필드 추가)

---

이전에는 단순 ui <> DB 라 2계층도 ㅇㅋ

도메인 로직 = 비즈니스 규칙, 유효성 검사, 계산..이 추가되며 곤란해짐

+ image

- 프레젠테이션에서 받은 데이터의 유효성 검사
- 입력/저장된 데이터를 바탕으로 계산
- 프레젠테이션에서 받은 명령 처리


육각형 아키텍쳐
- 모든 외부 요소를 근본적으로 외부 인터페이스로 나타내므로 대칭
  - 외부랑 연결인건 똑같은데 왜 데이터가 맨 아래냐!
  - 레포라고 하면 "조회"로 많이 쓰는데, 이벤트처럼 다른데 넘기는, "리턴값이 필요 없는 조회"의 갈 곳이 애매했다.
  - 어댑터(받은 행위)와 포트(보낼 행위)
- 책에서는 제공하는 인터페이스(ui) 와 사용하는 인터페이스(data) 를 나누는 비대칭이 유용하다고함

- ui: 프롬프트, 배치, 웹...

---

도메인과 데이터 원본은 프레젠테이션에 의존하지 않아야한다. (호출하면 안된다.)
- 여기서 늘 고민인게 request/response 는 ui 구현체에 따라 달라지는데 어느 레이어에 있는게 맞나?
- 이번엔 ui 구현체별 requestdto 가 있고, 어댑터용 dto로 변환해 들어와서 매핑에서만 ui 참조하고 도메인은 깨끗하게 둿음
- 저 ui dto 와 도메인 dto 를 매핑하는걸 어디서 할지가 고민이었는데 그냥 ui에서함~


- ui 계층을 추가하기위해 복제해야하는 기능이 있다면 도메인 논리가 프레젠테이션으로 유출됐다는 뜻.
  - ex. command ui 를 추가햇을 때 web ui 에서 뭔가 복붙해와야한다면? 인가?


---

프레젠테이션을 실행하는 위치
- 리치 클라이언트: 모바일, 클라이언트 같은 빌드 앤 설치형
- 웹 등은 서버에서 실행 (이 서버라는 워딩이 좀.. 인스턴스랑 클라-서버의 서버랑..)?


프레젠테이션은 클라한테 짬때릴수 있지만
도메인 로직은 웬만하면 서버에서 해라(유지 관리를 위해)
클라에 비즈니스로직 넣는건 응답성 개선이나 네트워크 없을때 로컬 작업을 지원하는것만.


클라/서버 로직 분리할거면 어디서 어떤 로직까지 할지가 애매한데

이걸 모듈로 만들어서 필요한데서 갖다쓰는 방법도 있다는? > 예시 있으면 좋겠음

